(function(){"use strict";var e={7748:function(e,t,r){var a=r(5471),s=r(5668),n=r(7314),i=r(1484),o=r(2938),l=r(374),u=r(1289),d=r(9483),c=r(6930),_=r(5322),m=r(3299),h=r(1034),p=r(3307),g=r(812),f=r(5427),b=r(1555),v=r(9296),y=r(2367),k=r(7270),w=function(){var e=this,t=e._self._c;return t(s.A,{},[t(_.A,[t(l.A,{ref:"container",staticClass:"pa-0",attrs:{fluid:e.is_in_iframe}},[t(u.A,{attrs:{value:!!e.dialog_title&&!!e.dialog_text,persistent:"",width:"500"}},[t(i.A,[t(o.ri,{staticClass:"headline grey lighten-2"},[e._v(e._s(e.dialog_title))]),t(o.OQ,[e._v(e._s(e.dialog_text))]),t(d.A),t(o.SL,[t(h.A),t(n.A,{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialog_title=null,e.dialog_text=null}}},[e._v(e._s(e.msg("OK","OK")))])],1)],1)],1),t(u.A,{attrs:{value:!!e.progress_text,"hide-overlay":"",persistent:"",width:"300"}},[t(i.A,{attrs:{color:"primary",dark:""}},[t(o.OQ,[e._v(" "+e._s(e.progress_text)+" "),t(m.A,{attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e.leaderboard?t(i.A,[t(v.A,{attrs:{flat:"",color:"primary",dark:""}},[t(y.sw,[e._v(e._s(e.msg("リーダーボード","Leaderboard")))]),t(h.A),t(k.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:a}){return[t(n.A,e._g(e._b({attrs:{icon:""},on:{click:e.switch_language}},"v-btn",a,!1),r),[t(c.A,[e._v("mdi-translate")])],1)]}}],null,!1,596791001)},[t("span",[e._v("Language")])])],1),t(f.A,{attrs:{"background-color":"primary","show-arrows":"",vertical:"xs"!==e.$vuetify.breakpoint.name},model:{value:e.task_tab,callback:function(t){e.task_tab=t},expression:"task_tab"}},[t(b.A,{attrs:{color:"secondary"}}),e._l(e.leaderboard.subtasks,(function(r){return t(p.A,{key:r.id},[e._v(" "+e._s(r.name)+" ")])})),e._l(e.leaderboard.subtasks,(function(r){return t(g.A,{key:r.id},[e.leaderboard&&e.leaderboard.submissions?t("p3-task",{attrs:{leaderboard:e.leaderboard,task:r,atoken:e.atoken,user_lang:e.user_lang,api_base_url:e.api_base_url},on:{"p3-show-dialog":e.p3ShowDialog,"p3-show-progress":e.p3ShowProgress,"p3-reload":e.reload}}):e._e()],1)}))],2)],1):e._e()],1)],1)],1)},A=[],x=(r(4603),r(7566),r(8721),r(4335)),S=r(8943),O=function(){var e=this,t=e._self._c;return t("span",{},[t(f.A,{attrs:{"background-color":"secondary","show-arrows":""},model:{value:e.version_tab,callback:function(t){e.version_tab=t},expression:"version_tab"}},[t(b.A,{attrs:{color:"secondary lighten-3"}}),t(p.A,[e._v(e._s(e.msg("概要","Overview")))]),e._l(e.task.versions,(function(r){return t(p.A,{key:r.id},[e._v(" "+e._s(r.name)+" ")])}))],2),t(S.A,{model:{value:e.version_tab,callback:function(t){e.version_tab=t},expression:"version_tab"}},[t(g.A,[t(l.A,[t(i.A,[t(o.ri,[e._v(e._s(e.msg("","Overview of ")+e.task.name+e.msg(" とは","")))]),t(o.OQ,[t("p",[t("span",{domProps:{innerHTML:e._s(e.task.desc)}})]),t("p",[e._v(" "+e._s(e.msg("詳しくは","See "))+" "),t("a",{attrs:{href:e.task.link,target:"_blank",rel:"noreferrer"}},[e._v(e._s(e.task.name))]),e._v(" "+e._s(e.msg("のページをご覧ください。"," for details."))+" ")])])],1)],1)],1),e._l(e.task.versions,(function(r){return t(g.A,{key:r.id},[r.message?t(l.A,[t(i.A,[t(o.OQ,[e._v(e._s(r.message))])],1)],1):e._e(),e.submissions&&!r.hidden?t("p3-board",{attrs:{items:e.submissions[r.id]||[],items_per_page:-1,sort_by:[e.task.primary_metric>1?`score${e.task.primary_metric}`:"score"],sort_desc:[!0],leaderboard:e.leaderboard,task:e.task,atoken:e.atoken,user_lang:e.user_lang,api_base_url:e.api_base_url},on:{"p3-show-dialog":e.p3ShowDialog,"p3-show-progress":e.p3ShowProgress,"p3-reload":e.reload}}):e._e()],1)}))],2)],1)},$=[],q=r(3180),j=r(6804),P=r(174),D=r(6513),R=function(){var e=this,t=e._self._c;return e.items?t(j.A,{staticClass:"elevation-1",attrs:{items:e.items_filtered,headers:e.lb_columns,"fixed-header":!0,"items-per-page":e.items_per_page,"single-expand":!1,expanded:[],"item-key":"id","show-expand":"",dense:"","sort-by":e.sort_by,"sort-desc":e.sort_desc},scopedSlots:e._u([{key:"item.score",fn:function({item:r}){return["success"===r.status?t("span",[e._v(e._s(parseFloat(r.score).toFixed(4)))]):"failure"===r.status?t("span",[t(q.A,{attrs:{"x-small":"x-small",color:"error"}},[e._v(e._s(e.msg("エラー","Error")))])],1):"accepted"===r.status?t("span",[t(q.A,{attrs:{"x-small":"x-small",color:"info"}},[e._v(e._s(e.msg("採点中","Calculating")))])],1):"received"===r.status?t("span",[t(q.A,{attrs:{"x-small":"x-small",color:"warning"}},[e._v(e._s(e.msg("採点待ち","Queued")))])],1):e._e()]}},e._l(e.extra_metrics,(function(r){return{key:`item.${r}`,fn:function({item:a}){return["success"===a.status&&e.isDefined(a[`${r}`])?t("span",{key:r},[e._v(e._s(parseFloat(a[`${r}`]).toFixed(4)))]):e._e()]}}})),{key:"item.version",fn:function({item:r}){return[r.version?t("span",[e._v(" "+e._s(r.version)+" ")]):t("span",[e._v(" - ")])]}},{key:"item.rank",fn:function({item:r}){return[r.rank?t("span",[e._v(" "+e._s(r.rank)+" ")]):t("span",[e._v(" - ")])]}},{key:"item.date",fn:function({item:t}){return[e._v(" "+e._s(e._f("dateTimeFormat")(t.date))+" ")]}},{key:"item.download",fn:function({item:r}){return[t(n.A,{attrs:{disabled:!0,rounded:"rounded",download:"","x-small":"x-small"}},[t(c.A,{attrs:{small:""}},[e._v("mdi-download")])],1)]}},{key:"expanded-item",fn:function({headers:r,item:a}){return[t("td",{attrs:{colspan:r.length}},[t(P.A,{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid[a.id],callback:function(t){e.$set(e.valid,a.id,t)},expression:"valid[item.id]"}},[t(l.A,[a.message?t(D.A,{attrs:{label:e.msg("採点結果","Comment from scorer"),readonly:!0,rows:"1","auto-grow":!0},model:{value:a.message,callback:function(t){e.$set(a,"message",t)},expression:"item.message"}}):e._e(),t(D.A,{attrs:{label:e.msg("システムの説明（用いた手法、または前回の提出との変更箇所）","System description (method used / changes from the previous submission)"),required:"",rules:e.descRules,counter:300,"validate-on-blur":!1,readonly:!0,rows:"1","auto-grow":!0},model:{value:a.desc,callback:function(t){e.$set(a,"desc",t)},expression:"item.desc"}})],1)],1)],1)]}}],null,!0)}):e._e()},F=[],T=(r(1454),r(5093)),C=r.n(T),M={name:"P3Board",components:{},props:{leaderboard:{type:Object,required:!0},task:{type:Object,required:!0},atoken:{type:String,required:!0},items:{type:Array,required:!0},items_per_page:{type:Number,required:!0},sort_by:{type:Array,required:!0},sort_desc:{type:Array,required:!0},hide_teamname:{type:Boolean},show_version:{type:Boolean},user_lang:{type:String,required:!0},api_base_url:{type:String,required:!0}},computed:{items_filtered:function(){return this.items},extra_metrics:function(){return this.task.metrics.slice(1).map((function(e,t){return`score${t+2}`}))},lb_columns:function(){return[].concat([{text:"ID",value:"id"}]).concat([{text:"Rank",value:"rank"}]).concat(this.hide_teamname?[]:[{text:"Team Name",value:"team_name"}]).concat([{text:"Download",value:"download",sortable:!1},{text:"Submitted at",value:"date"}]).concat(this.task.metrics.map((function(e,t){return{text:e,value:t>0?`score${t+1}`:"score"}}))).concat().concat([{text:"More...",value:"data-table-expand",sortable:!1}])},descRules(){return[e=>!!e||this.msg("必須","Required"),e=>e.length>=10||this.msg("必須（10文字以上）","Required (at least 10 characters)"),e=>e.length<=300||this.msg("300文字以内","within 300 characters")]},radioRules(){return[e=>!!e||this.msg("必須","Required")]}},data:()=>({valid:[],loading:!1}),filters:{dateFormat:function(e){return C().unix(e).format("YYYY/MM/DD")},dateTimeFormat:function(e){return C().unix(e).format("YYYY/MM/DD HH:mm")}},methods:{isDefined(e){return"undefined"!==typeof e},msg(e,t){return"ja"===this.user_lang?e:t}}},I=M,L=r(1656),Y=(0,L.A)(I,R,F,!1,null,null,null),B=Y.exports,E={name:"P3Task",components:{P3Board:B},props:{leaderboard:{type:Object,required:!0},task:{type:Object,required:!0},atoken:{type:String,required:!0},user_lang:{type:String,required:!0},api_base_url:{type:String,required:!0}},computed:{submissions:function(){return this.leaderboard.submissions[this.task.id]||{}}},data:()=>({version_tab:1}),methods:{msg(e,t){return"ja"===this.user_lang?e:t},p3ShowDialog(e,t){this.$emit("p3-show-dialog",null,null),this.$emit("p3-show-dialog",e,t)},p3ShowProgress(e){this.$emit("p3-show-progress",null),this.$emit("p3-show-progress",e)},reload(){this.$emit("p3-reload")}}},H=E,Q=(0,L.A)(H,O,$,!1,null,null,null),U=Q.exports,K={name:"App",components:{P3Task:U},data:()=>({iframe_height_timer:null,iframe_last_height:null,dialog_title:null,dialog_text:null,progress_text:null,task_tab:null,login_tab:1,leaderboard:null,valid:!1,atoken:null,user_lang:null}),computed:{atokenRules(){return[e=>!!e||this.msg("必須","Required"),e=>/^[0-9A-Za-z_]{20}$/.test(e)||this.msg("フォーマットエラー","Invalid format")]},api_base_url(){var e=document.currentScript&&document.currentScript.src&&/^.+\/leaderboard(-poliinfo4|-ufo|-u4)?\//.exec(document.currentScript.src);return e?e[0]:"/leaderboard/"},local_storage_name_lang(){return encodeURIComponent("lang_"+this.api_base_url)},local_storage_name_atoken(){return encodeURIComponent("atoken_"+this.api_base_url)},is_in_iframe(){return window.self!==window.top}},methods:{reload(e=!0){e&&this.p3ShowProgress(this.msg("ロード中...","Loading...")),x.A.get(`${this.api_base_url}dashboard.json`).then((e=>{this.p3ShowProgress(null),e.data&&"success"===e.data.status?this.leaderboard=e.data:this.p3ShowDialog(this.msg("ロードに失敗しました","Failed to load"),this.msg("エラーが起きました: ","An error has occurred: ")+e.data.message)})).catch((e=>{this.p3ShowProgress(null),this.p3ShowDialog(this.msg("ロードに失敗しました","Failed to load"),this.msg("エラーが起きました: ","An error has occurred: ")+e.message)}))},switch_language(){this.user_lang=this.msg("en","ja");try{localStorage.setItem(this.local_storage_name_lang,this.user_lang)}catch(e){}},msg(e,t){return"ja"===this.user_lang?e:t},p3ShowDialog(e,t){this.dialog_title=e,this.dialog_text=t},p3ShowProgress(e){this.progress_text=e},p3OpenLoginTab(){this.task_tab=0,this.login_tab=0},notify_iframe_height(){this.iframe_last_height!==this.$refs.container.scrollHeight&&(this.iframe_last_height=this.$refs.container.scrollHeight,window.parent.postMessage({height:this.iframe_last_height},"*"))}},mounted:function(){this.user_lang="";try{this.user_lang=localStorage.getItem(this.local_storage_name_lang)}catch(t){}if(!this.user_lang)try{var e=new URLSearchParams(window.location.search);e.has("lang")&&(this.user_lang=e.get("lang"))}catch(t){}this.user_lang||(this.user_lang="ja"),this.atoken="",this.reload(!1),this.atoken||"true"!==new URLSearchParams(location.search).get("regist")||(this.task_tab=0,this.login_tab=1),this.is_in_iframe&&(this.iframe_height_timer=setInterval(this.notify_iframe_height,300))},beforeDestroy(){this.iframe_height_timer&&clearInterval(this.iframe_height_timer)}},N=K,z=(0,L.A)(N,w,A,!1,null,"64b2e6a6",null),Z=z.exports,G=r(3971);a.Ay.use(G.A);var J=new G.A({theme:{dark:!1,themes:{light:{primary:"#90A4AE",secondary:"#B0BEC5",accent:"#ECEFF1"}}}});a.Ay.config.productionTip=!1,new a.Ay({vuetify:J,render:e=>e(Z)}).$mount("#leaderboard")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,function(){var e=[];r.O=function(t,a,s,n){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],n=e[d][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||i>=n)&&Object.keys(r.O).every((function(e){return r.O[e](a[l])}))?a.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,i=a[0],o=a[1],l=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var d=l(r)}for(t&&t(a);u<i.length;u++)n=i[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},a=self["webpackChunku4_webapp"]=self["webpackChunku4_webapp"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(7748)}));a=r.O(a)})();
//# sourceMappingURL=app.5f064ac2.js.map